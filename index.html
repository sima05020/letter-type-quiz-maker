<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文字変換プログラム</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            padding: 20px;
        }

        h2 {
            border-bottom: 2px solid #ccc;
            padding-bottom: 5px;
        }

        textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            margin-bottom: 15px;
            box-sizing: border-box;
            /* paddingを含めて幅100%にする */
        }

        #result {
            background-color: #f0f0f0;
            padding: 10px;
            border: 1px solid #ddd;
            min-height: 120px;
            white-space: pre-wrap;
            /* 改行をそのまま表示 */
        }
    </style>
</head>

<body>

    <h2>文字種クイズメーカー</h2>
    <p>ひらがなは「あ」「ぁ」、カタカナは「ア」「ァ」、半角英字は「A」「a」、漢字は「漢」、数字は「1」に変換されます。</p>

    <label for="inputText"><b>入力テキスト:</b></label>
    <textarea id="inputText" placeholder="ここに文章を入力"></textarea>

    <label for="result"><b>変換結果:</b></label>
    <div id="result"></div>

    <script>
        // 入力テキストエリアの要素を取得
        const inputText = document.getElementById('inputText');
        // 結果表示用のdiv要素を取得
        const resultDiv = document.getElementById('result');

        // テキストエリアで入力があるたびに実行される関数を定義
        inputText.addEventListener('input', function () {
            // 入力された元のテキストを取得
            let originalText = this.value;

            // 文字の変換処理
            let convertedText = originalText
                // ★変更点: ひらがなの処理を2段階に分割
                .replace(/[ぁぃぅぇぉゃゅょっゎゕゖ]/g, 'ぁ') // 先に小文字ひらがなを変換
                .replace(/[\u3042-\u309F]/g, 'あ')           // 残りのひらがなを変換
                .replace(/[ァィゥェォヵヶッャュョヮ]/g, 'ァ') // 先に小文字
                .replace(/[\u30A2-\u30FF]/g, 'ア')           // カタカナ
                .replace(/[\u2E80-\u2FDF\u3005\u3007\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFAFF]/g, '漢') // 漢字
                .replace(/[0-9]/g, '1')                    // 数字
                .replace(/[a-z]/g, 'a')                    // 英小文字
                .replace(/[A-Z]/g, 'A');                   // 英大文字

            // 変換後のテキストを結果表示用のdivに設定
            resultDiv.textContent = convertedText;
        });
    </script>

</body>

</html>